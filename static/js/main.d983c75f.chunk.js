(this["webpackJsonpnetflix-my-list"]=this["webpackJsonpnetflix-my-list"]||[]).push([[0],{14:function(e,t,n){e.exports=n(24)},24:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(5),c=n.n(i),o=n(2),l=n(1),m=n(12),s=n(13),u=n(4),d=n(3);function f(){return function(e){e({type:"FETCH_PENDING"}),fetch("https://4612cd5d-6a03-4ed3-b98d-572baf71b15b.mock.pstmn.io/netflix_mylist").then((function(e){return e.json()})).then((function(t){if(t.error)throw t.error;var n;return e({type:"FETCH_SUCCESS",list:(n=t).mylist,recommendation:n.recommendations}),t})).catch((function(t){e(function(e){return{type:"FETCH_ERROR",error:e}}(t))}))}}var E={pending:!1,list:[],recommendation:[],error:null};var b=Object(l.c)({fetchData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ERROR":return Object(d.a)({},e,{pending:!1,error:t.error});case"FETCH_PENDING":return Object(d.a)({},e,{pending:!0});case"FETCH_SUCCESS":return Object(d.a)({},e,{pending:!1,list:t.list,recommendation:t.recommendation});case"REMOVE_FROM_MY_LIST":var n=t.id,r=e.list.filter((function(e){return e.id===n}));return Object(d.a)({},e,{list:e.list.filter((function(e){return e.id!==n})),recommendation:[].concat(Object(u.a)(e.recommendation),Object(u.a)(r))});case"ADD_TO_MY_LIST":var a=t.id,i=e.recommendation.filter((function(e){return e.id===a}));return Object(d.a)({},e,{recommendation:e.recommendation.filter((function(e){return e.id!==a})),list:[].concat(Object(u.a)(e.list),Object(u.a)(i))});default:return e}}}),p=Object(s.createLogger)();var g=function(e){return e.fetchData.list},h=function(e){return e.fetchData.recommendation},O=function(e){return e.fetchData.pending},y=function(e){return e.fetchData.error};var v=Object(o.b)(null,{deleteMyList:function(e){return{type:"REMOVE_FROM_MY_LIST",id:e}}})((function(e){return a.a.createElement("div",{className:"myList"},e.list.map((function(t){return a.a.createElement("figure",{key:t.id,className:"figure-mylist"},a.a.createElement("img",{src:t.img,alt:t.id}),a.a.createElement("figcaption",null,t.title),a.a.createElement("button",{className:"btn",onClick:function(){return e.deleteMyList(t.id)}},"Remove"))})))}));var j=Object(o.b)(null,{addToMyList:function(e){return{type:"ADD_TO_MY_LIST",id:e}}})((function(e){return a.a.createElement("div",{className:"myList"},e.recommendation.map((function(t){return a.a.createElement("figure",{key:t.id,className:"figure-mylist"},a.a.createElement("img",{src:t.img,alt:t.id}),a.a.createElement("figcaption",null,t.title),a.a.createElement("button",{className:"btn",onClick:function(){return e.addToMyList(t.id)}},"Add"))})))}));var _,L=Object(o.b)((function(e){return{pending:O(e),list:g(e),recommendation:h(e),error:y(e)}}),(function(e){return Object(l.b)({fetchList:f},e)}))((function(e){var t=e.fetchList,n=e.list,i=e.error,c=e.recommendation,o=e.pending;return Object(r.useEffect)((function(){t()}),[t]),o?a.a.createElement("p",null,"Pending..."):i?a.a.createElement("p",null,"Loading Error! ",i.message):a.a.createElement("div",null,a.a.createElement("div",{className:"bar"},a.a.createElement("img",{src:"https://www.stickpng.com/assets/images/580b57fcd9996e24bc43c529.png",alt:"netflix-icon"})),a.a.createElement("div",{className:"list-header"},a.a.createElement("h2",null,"My List")),a.a.createElement(v,{list:n}),a.a.createElement("div",{className:"list-header"},a.a.createElement("h2",null,"Recommandation")),a.a.createElement(j,{recommendation:c}),a.a.createElement("div",{className:"bottom-bar"},a.a.createElement("h4",{className:"bottom-header"},"My List : "),n.map((function(e){return a.a.createElement("a",{key:e.id},e.title)}))))})),N=Object(l.d)(b,_,Object(l.a)(m.a,p));c.a.render(a.a.createElement(o.a,{store:N},a.a.createElement(L,null)),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.d983c75f.chunk.js.map